{% extends "base.html" %}
{% block title %}Kavak Trade-Up - Engine Configuration{% endblock %}
{% block content %}
    <header class="main-header">
        <h2>🚀 Trade-Up Engine Configuration</h2>
        <p>Optimize fee structures and analyze elasticity with Range Optimization</p>
    </header>

    <!-- Engine Mode Selection - Redesigned -->
    <div class="section-card" style="border: 2px solid #3b82f6; background: #eff6ff;">
        <h3 style="margin-bottom: 20px;">Select Engine Mode</h3>
        <div class="mode-selector" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
            <div class="mode-card" onclick="selectMode('default', event)" style="background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.2s;">
                <input type="radio" id="default-mode" name="engine-mode" value="default" checked style="display: none;">
                <h4 style="margin: 0 0 8px 0; color: #1f2937;">📊 Default Mode</h4>
                <p style="font-size: 13px; color: #6b7280; margin: 0;">Hierarchical subsidy search with predefined levels</p>
                <div style="margin-top: 10px; font-size: 12px; color: #9ca3af;">
                    • Service Fee: 5% or 0%<br>
                    • CXA: 4% or 0%<br>
                    • CAC: $0 or $5,000
                </div>
            </div>

            <div class="mode-card" onclick="selectMode('custom', event)" style="background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.2s;">
                <input type="radio" id="custom-mode" name="engine-mode" value="custom" style="display: none;">
                <h4 style="margin: 0 0 8px 0; color: #1f2937;">🎛️ Custom Mode</h4>
                <p style="font-size: 13px; color: #6b7280; margin: 0;">Fixed parameters you specify</p>
                <div style="margin-top: 10px; font-size: 12px; color: #9ca3af;">
                    • Set exact fee values<br>
                    • Single configuration<br>
                    • Quick testing
                </div>
            </div>

            <div class="mode-card" onclick="selectMode('range', event)" style="background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.2s; position: relative;">
                <input type="radio" id="range-mode" name="engine-mode" value="range" style="display: none;">
                <span style="position: absolute; top: 10px; right: 10px; background: #10b981; color: white; padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 600;">FEATURED</span>
                <h4 style="margin: 0 0 8px 0; color: #1f2937;">🎯 Range Optimization</h4>
                <p style="font-size: 13px; color: #6b7280; margin: 0;"><strong>Maximum flexibility & elasticity testing</strong></p>
                <div style="margin-top: 10px; font-size: 12px; color: #9ca3af;">
                    • Test ALL combinations<br>
                    • Basis point precision<br>
                    • Find optimal parameters
                </div>
            </div>
        </div>
    </div>

    <!-- Range Optimization Configuration -->
    <div id="range-config" class="section-card" style="display: none; border: 2px solid #10b981;">
        <h3>🎯 Range Optimization Settings</h3>
        <div class="alert alert-success" style="background: #d1fae5; border: 1px solid #10b981; padding: 15px; border-radius: 8px;">
            <strong>Maximum Flexibility Mode:</strong> Test EVERY parameter combination within your ranges with basis point precision. Perfect for elasticity analysis and finding optimal fee structures.
        </div>
        <!-- form inputs truncated for brevity -->
    </div>
{% endblock %}
{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        initializeConfigPage();
    });
</script>
{% endblock %}
